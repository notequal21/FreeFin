-- ============================================
-- Миграция: Добавление поля exchange_rate в projects
-- Описание: Добавляет поле для хранения курса обмена проекта (RUB/USD)
-- Используется для конвертации сумм транзакций в валюту проекта
-- Дата: 2026-01-02
-- ============================================

-- Добавляем поле exchange_rate в таблицу projects
-- Это курс обмена RUB/USD (сколько рублей за доллар) для конкретного проекта
ALTER TABLE public.projects
ADD COLUMN IF NOT EXISTS exchange_rate numeric CHECK (exchange_rate > 0);

-- Комментарий к полю
COMMENT ON COLUMN public.projects.exchange_rate IS 'Курс обмена RUB/USD (сколько рублей за доллар) для проекта. Используется для конвертации сумм транзакций в валюту проекта. Если не указан, используется курс по умолчанию из профиля пользователя.';

